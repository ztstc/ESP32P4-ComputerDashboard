# Holds jobs that run from the scheduled pipeline

build_idf_v5.3_scheduled:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template
  image: espressif/idf:${IDF_VER}
  parallel:
    matrix:
      - IDF_VER: ["v5.3.1", "v5.3.2", "v5.3.3", "release-v5.3"]
        IDF_TARGET: ["esp32p4", "esp32h2"]
        IDF_SLAVE_TARGET: ["esp32c6"]
        IDF_EXAMPLE_PATH: examples/protocols/mqtt/tcp
        #IDF_EXAMPLE_PATH: [examples/wifi/iperf]

build_idf_v5.4_scheduled:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template
  image: espressif/idf:${IDF_VER}
  parallel:
    matrix:
      - IDF_VER: ["v5.4", "v5.4.1", "v5.4.2", "release-v5.4"]
        IDF_TARGET: ["esp32p4", "esp32h2"]
        IDF_SLAVE_TARGET: ["esp32c6"]
        IDF_EXAMPLE_PATH: examples/protocols/mqtt/tcp
        #IDF_EXAMPLE_PATH: [examples/wifi/iperf]

build_idf_v5.5_scheduled:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template
  image: espressif/idf:${IDF_VER}
  parallel:
    matrix:
      - IDF_VER: ["v5.5", "release-v5.5"]
        IDF_TARGET: ["esp32p4", "esp32h2"]
        IDF_SLAVE_TARGET: ["esp32", "esp32c2", "esp32c3", "esp32s3" ]
        IDF_EXAMPLE_PATH: [examples/wifi/iperf]

build_idf_master_scheduled:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template
  image: espressif/idf:latest
  parallel:
    matrix:
      - IDF_TARGET: ["esp32p4", "esp32h2"]
        IDF_SLAVE_TARGET: ["esp32", "esp32c2", "esp32c3", "esp32s3" ]
        IDF_EXAMPLE_PATH: [examples/protocols/mqtt/tcp, examples/wifi/iperf]

build_all_features_enabled_master_scheduled:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template
  image: espressif/idf:latest
  parallel:
    matrix:
      - IDF_TARGET: ["esp32p4"]
        IDF_SLAVE_TARGET: ["esp32c6", "esp32c5"]
        IDF_EXAMPLE_PATH: [examples/wifi/iperf]
        SDKCONFIG_CI_FILE: "sdkconfig.ci.all_features_enabled"

build_coprocessor_idf_v5.3_scheduled:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template_coprocessor
  image: espressif/idf:${IDF_VER}
  parallel:
    matrix:
      - IDF_TARGET: ["esp32c6"]
        IDF_VER: ["v5.3.1", "v5.3.2", "v5.3.3", "release-v5.3"]
        SLAVE_CI_FILE: ["sdio", "spi", "spi_hd", "uart"]

build_coprocessor_idf_v5.3_scheduled_2:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template_coprocessor
  image: espressif/idf:${IDF_VER}
  parallel:
    matrix:
      - IDF_TARGET: ["esp32c2", "esp32c3", "esp32s3"]
        IDF_VER: ["v5.3.1", "v5.3.2", "v5.3.3", "release-v5.3"]
        SLAVE_CI_FILE: ["spi", "spi_hd", "uart"]

build_coprocessor_idf_v5.3_scheduled_esp32:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template_coprocessor
  image: espressif/idf:${IDF_VER}
  parallel:
    matrix:
      - IDF_TARGET: ["esp32"]
        IDF_VER: ["v5.3.1", "v5.3.2", "v5.3.3", "release-v5.3"]
        SLAVE_CI_FILE: ["sdio", "spi", "uart"]

build_coprocessor_idf_v5.4_scheduled:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template_coprocessor
  image: espressif/idf:${IDF_VER}
  parallel:
    matrix:
      - IDF_TARGET: ["esp32c6"]
        IDF_VER: ["v5.4", "v5.4.1", "v5.4.2", "release-v5.4"]
        SLAVE_CI_FILE: ["sdio", "spi", "spi_hd", "uart"]

build_coprocessor_idf_v5.4_scheduled_2:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template_coprocessor
  image: espressif/idf:${IDF_VER}
  parallel:
    matrix:
      - IDF_TARGET: ["esp32c2", "esp32c3", "esp32s3"]
        IDF_VER: ["v5.4", "v5.4.1", "v5.4.2", "release-v5.4"]
        SLAVE_CI_FILE: ["spi", "spi_hd", "uart"]

build_coprocessor_idf_v5.4_scheduled_esp32:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template_coprocessor
  image: espressif/idf:${IDF_VER}
  parallel:
    matrix:
      - IDF_TARGET: ["esp32"]
        IDF_VER: ["v5.4", "v5.4.1", "v5.4.2", "release-v5.4"]
        SLAVE_CI_FILE: ["sdio", "spi", "uart"]

build_coprocessor_idf_v5.5_scheduled:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template_coprocessor
  image: espressif/idf:${IDF_VER}
  parallel:
    matrix:
      - IDF_TARGET: ["esp32c2", "esp32c3", "esp32s3"]
        IDF_VER: ["v5.5", "v5.5.1", "release-v5.5"]
        SLAVE_CI_FILE: ["spi", "spi_hd", "uart"]

build_coprocessor_idf_v5.5_scheduled_esp32:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template_coprocessor
  image: espressif/idf:${IDF_VER}
  parallel:
    matrix:
      - IDF_TARGET: ["esp32"]
        IDF_VER: ["v5.5", "v5.5.1", "release-v5.5"]
        SLAVE_CI_FILE: ["sdio", "spi", "uart"]

build_coprocessor_idf_master_all_features_enabled_scheduled:
  tags:
    - scheduled_build
  rules:
    - !reference [.scheduled_pipeline_rules, rules]
  extends: .build_template_coprocessor
  image: espressif/idf:latest
  parallel:
    matrix:
      - IDF_TARGET: ["esp32c6"]
        SLAVE_CI_FILE: ["all_features"]
